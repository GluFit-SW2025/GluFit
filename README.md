# ğŸ½ï¸ ë‹¹ë‡¨ ê´€ë¦¬ ìŒì‹ ì¸ì‹ ì‹œìŠ¤í…œ

AI ê¸°ë°˜ í•œêµ­ ìŒì‹ ì¸ì‹ ë° ë‹¹ë‡¨ ìœ„í—˜ë„ í‰ê°€ ì•±

---

## ğŸ“‹ ëª©ì°¨
1. [í”„ë¡œì íŠ¸ ê°œìš”](#í”„ë¡œì íŠ¸-ê°œìš”)
2. [ì‹œìŠ¤í…œ êµ¬ì¡°](#ì‹œìŠ¤í…œ-êµ¬ì¡°)
3. [Firestore ë°ì´í„° ì‚¬ìš© ë°©ë²•](#firestore-ë°ì´í„°-ì‚¬ìš©-ë°©ë²•)
4. [ëª¨ë¸ ì •ë³´](#ëª¨ë¸-ì •ë³´)
5. [ì•± ì£¼ìš” ê¸°ëŠ¥](#ì•±-ì£¼ìš”-ê¸°ëŠ¥)
6. [ìµœì¢… ì¶œë ¥ í™”ë©´](#ìµœì¢…-ì¶œë ¥-í™”ë©´)

---

## ğŸ¯ í”„ë¡œì íŠ¸ ê°œìš”

### ëª©ì 
ë‹¹ë‡¨ë³‘ í™˜ì ë° ê³ ìœ„í—˜êµ°ì„ ìœ„í•œ ìŒì‹ ì˜ì–‘ì†Œ ë¶„ì„ ë° ìœ„í—˜ë„ í‰ê°€ ì‹œìŠ¤í…œ

### ì£¼ìš” ê¸°ëŠ¥
- ğŸ“¸ **ìŒì‹ ì‚¬ì§„ ì¸ì‹**: 150ì¢… í•œêµ­ ìŒì‹ ìë™ ë¶„ë¥˜
- ğŸ“Š **ì˜ì–‘ì†Œ ì •ë³´ ì œê³µ**: ì¹¼ë¡œë¦¬, íƒ„ìˆ˜í™”ë¬¼, ë‹¹ë¥˜, ë‚˜íŠ¸ë¥¨ ë“±
- âš ï¸ **ë‹¹ë‡¨ ìœ„í—˜ë„ í‰ê°€**: ì‚¬ìš©ì ë‹¹ë‡¨ ë‹¨ê³„ë³„ ë§ì¶¤ ê²½ê³ 
- ğŸ“ **ì‹ë‹¨ íˆìŠ¤í† ë¦¬**: ì˜¤ëŠ˜/ê³¼ê±° ì„­ì·¨ ìŒì‹ ê¸°ë¡ ë° ì¡°íšŒ
- ğŸ“ˆ **ì˜ì–‘ì†Œ ëˆ„ì  í†µê³„**: ì¼ì¼ ì„­ì·¨ëŸ‰ ì¶”ì 

---

## ğŸ—ï¸ ì‹œìŠ¤í…œ êµ¬ì¡°

```
ì‚¬ìš©ì
  â†“
ğŸ“± í”ŒëŸ¬í„° ì•±
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. ì´ë¯¸ì§€ ì´¬ì˜/ì„ íƒ  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. PyTorch ëª¨ë¸     â”‚
â”‚    ìŒì‹ ë¶„ë¥˜ ì‹¤í–‰   â”‚
â”‚    ê²°ê³¼: "ê¹€ì¹˜ì°Œê°œ"  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. Firestore ì¡°íšŒ   â”‚
â”‚    ì˜ì–‘ì†Œ ë°ì´í„°    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. ë‹¹ë‡¨ ìœ„í—˜ë„ ê³„ì‚° â”‚
â”‚    (ì‚¬ìš©ì ë ˆë²¨ë³„)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. ê²°ê³¼ í™”ë©´ í‘œì‹œ   â”‚
â”‚    + DB íˆìŠ¤í† ë¦¬ ì €ì¥â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”¥ Firestore ë°ì´í„° ì‚¬ìš© ë°©ë²•

### Firestore ë°ì´í„° êµ¬ì¡°

```
Collection: nutrition_db
â”œâ”€ Document: "ê¹€ì¹˜ì°Œê°œ"
â”‚  â”œâ”€ ì‹í’ˆëª…: "ê¹€ì¹˜ì°Œê°œ"
â”‚  â”œâ”€ ì¹¼ë¡œë¦¬: 150
â”‚  â”œâ”€ íƒ„ìˆ˜í™”ë¬¼: 12.5
â”‚  â”œâ”€ ì´ë‹¹ë¥˜: 3.2
â”‚  â”œâ”€ ë‹¨ë°±ì§ˆ: 8.5
â”‚  â”œâ”€ ì§€ë°©: 7.2
â”‚  â”œâ”€ ì‹ì´ì„¬ìœ : 2.1
â”‚  â”œâ”€ ë‚˜íŠ¸ë¥¨: 850
â”‚  â”œâ”€ ì½œë ˆìŠ¤í…Œë¡¤: 25
â”‚  â”œâ”€ 1íšŒì œê³µëŸ‰: "250g"
â”‚  â””â”€ ì‹í’ˆëŒ€ë¶„ë¥˜: "ìŒì‹"
â”‚
â”œâ”€ Document: "ë¹„ë¹”ë°¥"
â”‚  â””â”€ (ë™ì¼ êµ¬ì¡°)
â”‚
â””â”€ ... (150ê°œ ìŒì‹)

Collection: users
â””â”€ Document: {userId}
   â”œâ”€ ì´ë¦„: "í™ê¸¸ë™"
   â”œâ”€ ë‹¹ë‡¨ë ˆë²¨: 3
   â””â”€ ê°€ì…ì¼: "2024-11-19"

Collection: user_history
â””â”€ Document: {userId}
   â””â”€ subcollection: meals
      â”œâ”€ Document: {timestamp}
      â”‚  â”œâ”€ ìŒì‹ëª…: "ê¹€ì¹˜ì°Œê°œ"
      â”‚  â”œâ”€ ì¹¼ë¡œë¦¬: 150
      â”‚  â”œâ”€ íƒ„ìˆ˜í™”ë¬¼: 12.5
      â”‚  â”œâ”€ ì´ë‹¹ë¥˜: 3.2
      â”‚  â”œâ”€ ìœ„í—˜ì—¬ë¶€: true
      â”‚  â”œâ”€ ë‚ ì§œ: "2024-11-19"
      â”‚  â””â”€ ì‹œê°„: "12:30"
      â””â”€ ...
```

---

### 1. ì˜ì–‘ì†Œ ë°ì´í„° ì¡°íšŒ

ìŒì‹ ì´ë¦„ìœ¼ë¡œ ì˜ì–‘ì†Œ ì •ë³´ ê°€ì ¸ì˜¤ê¸°:

```dart
import 'package:cloud_firestore/cloud_firestore.dart';

Future<Map<String, dynamic>?> getNutritionData(String foodName) async {
  try {
    // Firestoreì—ì„œ ìŒì‹ëª…ìœ¼ë¡œ ì¡°íšŒ
    DocumentSnapshot doc = await FirebaseFirestore.instance
        .collection('nutrition_db')
        .doc(foodName)  // ìŒì‹ëª…ì´ Document ID
        .get();
    
    if (doc.exists) {
      return doc.data() as Map<String, dynamic>;
    } else {
      print('ìŒì‹ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: $foodName');
      return null;
    }
  } catch (e) {
    print('ë°ì´í„° ì¡°íšŒ ì˜¤ë¥˜: $e');
    return null;
  }
}

// ì‚¬ìš© ì˜ˆì‹œ
void example() async {
  var nutrition = await getNutritionData('ê¹€ì¹˜ì°Œê°œ');
  
  if (nutrition != null) {
    print('ì¹¼ë¡œë¦¬: ${nutrition['ì¹¼ë¡œë¦¬']} kcal');
    print('íƒ„ìˆ˜í™”ë¬¼: ${nutrition['íƒ„ìˆ˜í™”ë¬¼']}g');
    print('ì´ë‹¹ë¥˜: ${nutrition['ì´ë‹¹ë¥˜']}g');
    print('ë‹¨ë°±ì§ˆ: ${nutrition['ë‹¨ë°±ì§ˆ']}g');
    print('ì§€ë°©: ${nutrition['ì§€ë°©']}g');
    print('ë‚˜íŠ¸ë¥¨: ${nutrition['ë‚˜íŠ¸ë¥¨']}mg');
  }
}
```

---

### 2. ì‹ë‹¨ íˆìŠ¤í† ë¦¬ ì €ì¥

ì‚¬ìš©ìê°€ ë¶„ì„í•œ ìŒì‹ì„ íˆìŠ¤í† ë¦¬ì— ì €ì¥:

```dart
Future<void> saveMealHistory(
  String userId, 
  String foodName, 
  Map<String, dynamic> nutrition,
  bool isDangerous
) async {
  try {
    // í˜„ì¬ ì‹œê°„
    DateTime now = DateTime.now();
    String timestamp = now.millisecondsSinceEpoch.toString();
    
    // ì €ì¥í•  ë°ì´í„°
    Map<String, dynamic> mealData = {
      'ìŒì‹ëª…': foodName,
      'ì¹¼ë¡œë¦¬': nutrition['ì¹¼ë¡œë¦¬'],
      'íƒ„ìˆ˜í™”ë¬¼': nutrition['íƒ„ìˆ˜í™”ë¬¼'],
      'ì´ë‹¹ë¥˜': nutrition['ì´ë‹¹ë¥˜'],
      'ë‹¨ë°±ì§ˆ': nutrition['ë‹¨ë°±ì§ˆ'],
      'ì§€ë°©': nutrition['ì§€ë°©'],
      'ë‚˜íŠ¸ë¥¨': nutrition['ë‚˜íŠ¸ë¥¨'],
      'ìœ„í—˜ì—¬ë¶€': isDangerous,
      'ë‚ ì§œ': '${now.year}-${now.month.toString().padLeft(2, '0')}-${now.day.toString().padLeft(2, '0')}',
      'ì‹œê°„': '${now.hour.toString().padLeft(2, '0')}:${now.minute.toString().padLeft(2, '0')}',
      'timestamp': now,
    };
    
    // Firestoreì— ì €ì¥
    await FirebaseFirestore.instance
        .collection('user_history')
        .doc(userId)
        .collection('meals')
        .doc(timestamp)
        .set(mealData);
    
    print('ì‹ë‹¨ íˆìŠ¤í† ë¦¬ ì €ì¥ ì™„ë£Œ');
  } catch (e) {
    print('íˆìŠ¤í† ë¦¬ ì €ì¥ ì˜¤ë¥˜: $e');
  }
}
```

---

### 3. ì˜¤ëŠ˜ì˜ ì‹ë‹¨ íˆìŠ¤í† ë¦¬ ì¡°íšŒ

ì˜¤ëŠ˜ ë¨¹ì€ ìŒì‹ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°:

```dart
Future<List<Map<String, dynamic>>> getTodayMeals(String userId) async {
  try {
    DateTime now = DateTime.now();
    String today = '${now.year}-${now.month.toString().padLeft(2, '0')}-${now.day.toString().padLeft(2, '0')}';
    
    // ì˜¤ëŠ˜ ë‚ ì§œë¡œ í•„í„°ë§
    QuerySnapshot snapshot = await FirebaseFirestore.instance
        .collection('user_history')
        .doc(userId)
        .collection('meals')
        .where('ë‚ ì§œ', isEqualTo: today)
        .orderBy('timestamp', descending: true)  // ìµœì‹ ìˆœ ì •ë ¬
        .get();
    
    List<Map<String, dynamic>> meals = [];
    for (var doc in snapshot.docs) {
      meals.add(doc.data() as Map<String, dynamic>);
    }
    
    return meals;
  } catch (e) {
    print('íˆìŠ¤í† ë¦¬ ì¡°íšŒ ì˜¤ë¥˜: $e');
    return [];
  }
}

// ì‚¬ìš© ì˜ˆì‹œ
void showTodayMeals() async {
  String userId = 'user123';  // ë¡œê·¸ì¸í•œ ì‚¬ìš©ì ID
  List<Map<String, dynamic>> meals = await getTodayMeals(userId);
  
  print('ì˜¤ëŠ˜ ë¨¹ì€ ìŒì‹ ${meals.length}ê°œ');
  for (var meal in meals) {
    print('${meal['ì‹œê°„']} - ${meal['ìŒì‹ëª…']} (${meal['ì¹¼ë¡œë¦¬']}kcal)');
  }
}
```

---

### 4. ë‚ ì§œë³„ ì‹ë‹¨ íˆìŠ¤í† ë¦¬ ì¡°íšŒ

íŠ¹ì • ë‚ ì§œì˜ ì‹ë‹¨ ì¡°íšŒ:

```dart
Future<List<Map<String, dynamic>>> getMealsByDate(String userId, String date) async {
  try {
    QuerySnapshot snapshot = await FirebaseFirestore.instance
        .collection('user_history')
        .doc(userId)
        .collection('meals')
        .where('ë‚ ì§œ', isEqualTo: date)  // ì˜ˆ: '2024-11-19'
        .orderBy('timestamp', descending: true)
        .get();
    
    List<Map<String, dynamic>> meals = [];
    for (var doc in snapshot.docs) {
      meals.add(doc.data() as Map<String, dynamic>);
    }
    
    return meals;
  } catch (e) {
    print('íˆìŠ¤í† ë¦¬ ì¡°íšŒ ì˜¤ë¥˜: $e');
    return [];
  }
}
```

---

### 5. ì¼ì¼ ì˜ì–‘ì†Œ ëˆ„ì  ê³„ì‚°

ì˜¤ëŠ˜ ì„­ì·¨í•œ ì´ ì˜ì–‘ì†Œ ê³„ì‚°:

```dart
Future<Map<String, double>> calculateDailyNutrition(String userId) async {
  List<Map<String, dynamic>> meals = await getTodayMeals(userId);
  
  Map<String, double> total = {
    'ì¹¼ë¡œë¦¬': 0,
    'íƒ„ìˆ˜í™”ë¬¼': 0,
    'ì´ë‹¹ë¥˜': 0,
    'ë‹¨ë°±ì§ˆ': 0,
    'ì§€ë°©': 0,
    'ë‚˜íŠ¸ë¥¨': 0,
  };
  
  for (var meal in meals) {
    total['ì¹¼ë¡œë¦¬'] = (total['ì¹¼ë¡œë¦¬'] ?? 0) + (meal['ì¹¼ë¡œë¦¬'] ?? 0);
    total['íƒ„ìˆ˜í™”ë¬¼'] = (total['íƒ„ìˆ˜í™”ë¬¼'] ?? 0) + (meal['íƒ„ìˆ˜í™”ë¬¼'] ?? 0);
    total['ì´ë‹¹ë¥˜'] = (total['ì´ë‹¹ë¥˜'] ?? 0) + (meal['ì´ë‹¹ë¥˜'] ?? 0);
    total['ë‹¨ë°±ì§ˆ'] = (total['ë‹¨ë°±ì§ˆ'] ?? 0) + (meal['ë‹¨ë°±ì§ˆ'] ?? 0);
    total['ì§€ë°©'] = (total['ì§€ë°©'] ?? 0) + (meal['ì§€ë°©'] ?? 0);
    total['ë‚˜íŠ¸ë¥¨'] = (total['ë‚˜íŠ¸ë¥¨'] ?? 0) + (meal['ë‚˜íŠ¸ë¥¨'] ?? 0);
  }
  
  return total;
}

// ì‚¬ìš© ì˜ˆì‹œ
void showDailySummary() async {
  String userId = 'user123';
  Map<String, double> total = await calculateDailyNutrition(userId);
  
  print('ì˜¤ëŠ˜ ì´ ì„­ì·¨ëŸ‰:');
  print('ì¹¼ë¡œë¦¬: ${total['ì¹¼ë¡œë¦¬']} kcal');
  print('íƒ„ìˆ˜í™”ë¬¼: ${total['íƒ„ìˆ˜í™”ë¬¼']}g');
  print('ì´ë‹¹ë¥˜: ${total['ì´ë‹¹ë¥˜']}g');
}
```

---

## ğŸ¤– ëª¨ë¸ ì •ë³´

### ëª¨ë¸ ìŠ¤í™
- **ì•„í‚¤í…ì²˜**: MobileNetV2 (PyTorch)
- **í´ë˜ìŠ¤ ìˆ˜**: 150ê°œ í•œêµ­ ìŒì‹
- **ì…ë ¥ í¬ê¸°**: 224x224 RGB
- **ì¶œë ¥**: 150ì°¨ì› í™•ë¥  ë²¡í„°
- **íŒŒì¼**: `model_mobile.ptl` (~15MB)

### ìŒì‹ ë¶„ë¥˜ ì˜ˆì‹œ ì½”ë“œ

```dart
import 'package:pytorch_mobile/pytorch_mobile.dart';

class FoodClassifier {
  late Model _model;
  
  // 150ê°œ ìŒì‹ í´ë˜ìŠ¤ ë¦¬ìŠ¤íŠ¸
  final List<String> foodClasses = [
    'ê°€ì§€ë³¶ìŒ', 'ê°„ì¥ê²Œì¥', 'ê°ˆë¹„êµ¬ì´', 'ê°ˆë¹„ì°œ', 'ê°ˆë¹„íƒ•',
    'ê°ˆì¹˜êµ¬ì´', 'ê°ˆì¹˜ì¡°ë¦¼', 'ê°ìì „', 'ê°ìì¡°ë¦¼', 'ê°ìì±„ë³¶ìŒ',
    // ... (150ê°œ ì „ì²´ ë¦¬ìŠ¤íŠ¸)
  ];
  
  // ëª¨ë¸ ë¡œë“œ
  Future<void> loadModel() async {
    _model = await PyTorchMobile.loadModel('assets/model_mobile.ptl');
  }
  
  // ìŒì‹ ë¶„ë¥˜
  Future<Map<String, dynamic>> classifyFood(String imagePath) async {
    // ì´ë¯¸ì§€ ì˜ˆì¸¡
    var result = await _model.getImagePrediction(
      imagePath,
      224, 224,
      mean: [0.485, 0.456, 0.406],
      std: [0.229, 0.224, 0.225],
    );
    
    // ìµœê³  í™•ë¥  ì¸ë±ìŠ¤ ì°¾ê¸°
    double maxProb = result.reduce((a, b) => a > b ? a : b);
    int predictedIndex = result.indexOf(maxProb);
    String foodName = foodClasses[predictedIndex];
    
    return {
      'ìŒì‹ëª…': foodName,
      'ì‹ ë¢°ë„': maxProb,
      'ì¸ë±ìŠ¤': predictedIndex,
    };
  }
}
```

---

## ğŸ“± ì•± ì£¼ìš” ê¸°ëŠ¥

### 1. íšŒì›ê°€ì… ë° ë‹¹ë‡¨ ìœ„í—˜ë„ ì„¤ì •

ì‚¬ìš©ìê°€ íšŒì›ê°€ì… ì‹œ ë‹¹ë‡¨ ìœ„í—˜ ë‹¨ê³„ ì„ íƒ:

```
ë ˆë²¨ 1: ì •ìƒ (ë‹¹ë‡¨ ì—†ìŒ)
ë ˆë²¨ 2: ê²½ê³„ì„± (ê³µë³µí˜ˆë‹¹ì¥ì• )
ë ˆë²¨ 3: ë‹¹ë‡¨ë³‘ í™˜ì
ë ˆë²¨ 4: ë‹¹ë‡¨ í•©ë³‘ì¦ ìœ„í—˜êµ°
```

---

### 2. ë‹¹ë‡¨ ìœ„í—˜ë„ íŒë‹¨ ê¸°ì¤€

ê° ë ˆë²¨ë³„ ì˜ì–‘ì†Œ 1íšŒ ì œê³µëŸ‰ ê¸°ì¤€:

| ë ˆë²¨ | ë‹¹ë¥˜(g) | íƒ„ìˆ˜í™”ë¬¼(g) | ë‚˜íŠ¸ë¥¨(mg) | ì¹¼ë¡œë¦¬(kcal) |
|------|---------|-------------|-----------|--------------|
| 1    | â‰¤ 20    | â‰¤ 60        | â‰¤ 2000    | â‰¤ 700        |
| 2    | â‰¤ 15    | â‰¤ 50        | â‰¤ 1800    | â‰¤ 600        |
| 3    | â‰¤ 10    | â‰¤ 40        | â‰¤ 1500    | â‰¤ 500        |
| 4    | â‰¤ 5     | â‰¤ 30        | â‰¤ 1200    | â‰¤ 400        |

---

### 3. ìœ„í—˜ë„ íŒë‹¨ ë¡œì§

```dart
class DiabetesRiskChecker {
  // ìœ„í—˜ë„ ê¸°ì¤€
  static const Map<int, Map<String, double>> limits = {
    1: {'ë‹¹ë¥˜': 20, 'íƒ„ìˆ˜í™”ë¬¼': 60, 'ë‚˜íŠ¸ë¥¨': 2000, 'ì¹¼ë¡œë¦¬': 700},
    2: {'ë‹¹ë¥˜': 15, 'íƒ„ìˆ˜í™”ë¬¼': 50, 'ë‚˜íŠ¸ë¥¨': 1800, 'ì¹¼ë¡œë¦¬': 600},
    3: {'ë‹¹ë¥˜': 10, 'íƒ„ìˆ˜í™”ë¬¼': 40, 'ë‚˜íŠ¸ë¥¨': 1500, 'ì¹¼ë¡œë¦¬': 500},
    4: {'ë‹¹ë¥˜': 5,  'íƒ„ìˆ˜í™”ë¬¼': 30, 'ë‚˜íŠ¸ë¥¨': 1200, 'ì¹¼ë¡œë¦¬': 400},
  };
  
  // ìœ„í—˜ ì—¬ë¶€ íŒë‹¨
  static bool isDangerous(int userLevel, Map<String, dynamic> nutrition) {
    var limit = limits[userLevel]!;
    
    if ((nutrition['ì´ë‹¹ë¥˜'] ?? 0) > limit['ë‹¹ë¥˜']!) return true;
    if ((nutrition['íƒ„ìˆ˜í™”ë¬¼'] ?? 0) > limit['íƒ„ìˆ˜í™”ë¬¼']!) return true;
    if ((nutrition['ë‚˜íŠ¸ë¥¨'] ?? 0) > limit['ë‚˜íŠ¸ë¥¨']!) return true;
    if ((nutrition['ì¹¼ë¡œë¦¬'] ?? 0) > limit['ì¹¼ë¡œë¦¬']!) return true;
    
    return false;
  }
  
  // ê²½ê³  ë©”ì‹œì§€ ìƒì„±
  static List<String> getWarnings(int userLevel, Map<String, dynamic> nutrition) {
    var limit = limits[userLevel]!;
    List<String> warnings = [];
    
    if ((nutrition['ì´ë‹¹ë¥˜'] ?? 0) > limit['ë‹¹ë¥˜']!) {
      warnings.add('âš ï¸ ë‹¹ë¥˜ ì´ˆê³¼: ${nutrition['ì´ë‹¹ë¥˜']}g (ê¸°ì¤€: ${limit['ë‹¹ë¥˜']}g)');
    }
    if ((nutrition['íƒ„ìˆ˜í™”ë¬¼'] ?? 0) > limit['íƒ„ìˆ˜í™”ë¬¼']!) {
      warnings.add('âš ï¸ íƒ„ìˆ˜í™”ë¬¼ ì´ˆê³¼: ${nutrition['íƒ„ìˆ˜í™”ë¬¼']}g (ê¸°ì¤€: ${limit['íƒ„ìˆ˜í™”ë¬¼']}g)');
    }
    if ((nutrition['ë‚˜íŠ¸ë¥¨'] ?? 0) > limit['ë‚˜íŠ¸ë¥¨']!) {
      warnings.add('âš ï¸ ë‚˜íŠ¸ë¥¨ ì´ˆê³¼: ${nutrition['ë‚˜íŠ¸ë¥¨']}mg (ê¸°ì¤€: ${limit['ë‚˜íŠ¸ë¥¨']}mg)');
    }
    if ((nutrition['ì¹¼ë¡œë¦¬'] ?? 0) > limit['ì¹¼ë¡œë¦¬']!) {
      warnings.add('âš ï¸ ì¹¼ë¡œë¦¬ ì´ˆê³¼: ${nutrition['ì¹¼ë¡œë¦¬']}kcal (ê¸°ì¤€: ${limit['ì¹¼ë¡œë¦¬']}kcal)');
    }
    
    return warnings;
  }
}
```

---

## ğŸ–¼ï¸ ìµœì¢… ì¶œë ¥ í™”ë©´

### í™”ë©´ 1: ìŒì‹ ë¶„ì„ ê²°ê³¼ (ìœ„í—˜ ìŒì‹)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                 â”‚
â”‚      [ìŒì‹ ì´ë¯¸ì§€ í‘œì‹œ]          â”‚
â”‚                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ² ê¹€ì¹˜ì°Œê°œ
ì‹ ë¢°ë„: 95.2%

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ğŸ“Š ì˜ì–‘ ì •ë³´ (1íšŒ ì œê³µëŸ‰: 250g)

ì¹¼ë¡œë¦¬        150 kcal
íƒ„ìˆ˜í™”ë¬¼      12.5 g
  â”” ë‹¹ë¥˜      3.2 g
ë‹¨ë°±ì§ˆ        8.5 g
ì§€ë°©          7.2 g
ì‹ì´ì„¬ìœ       2.1 g
ë‚˜íŠ¸ë¥¨        850 mg
ì½œë ˆìŠ¤í…Œë¡¤    25 mg

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

âš ï¸ ë‹¹ë‡¨ ìœ„í—˜ë„ í‰ê°€ (ë ˆë²¨ 3)

âŒ ì£¼ì˜ê°€ í•„ìš”í•œ ìŒì‹ì…ë‹ˆë‹¤!

ê²½ê³  ì‚¬í•­:
â€¢ ë‚˜íŠ¸ë¥¨ ì´ˆê³¼: 850mg (ê¸°ì¤€: 500mg ì´í•˜)

[íˆìŠ¤í† ë¦¬ì— ì €ì¥] [ë‹¤ì‹œ ì´¬ì˜]
```

---

### í™”ë©´ 2: ì•ˆì „í•œ ìŒì‹ (ë ˆë²¨ 3 ê¸°ì¤€)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                 â”‚
â”‚      [ìŒì‹ ì´ë¯¸ì§€ í‘œì‹œ]          â”‚
â”‚                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ¥— ì‹œê¸ˆì¹˜ë‚˜ë¬¼
ì‹ ë¢°ë„: 92.7%

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ğŸ“Š ì˜ì–‘ ì •ë³´ (1íšŒ ì œê³µëŸ‰: 100g)

ì¹¼ë¡œë¦¬        35 kcal
íƒ„ìˆ˜í™”ë¬¼      6.2 g
  â”” ë‹¹ë¥˜      1.1 g
ë‹¨ë°±ì§ˆ        3.5 g
ì§€ë°©          0.8 g
ì‹ì´ì„¬ìœ       2.9 g
ë‚˜íŠ¸ë¥¨        320 mg
ì½œë ˆìŠ¤í…Œë¡¤    0 mg

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

âœ… ë‹¹ë‡¨ ìœ„í—˜ë„ í‰ê°€ (ë ˆë²¨ 3)

ì•ˆì „í•œ ìŒì‹ì…ë‹ˆë‹¤!

[íˆìŠ¤í† ë¦¬ì— ì €ì¥] [ë‹¤ì‹œ ì´¬ì˜]
```

---

### í™”ë©´ 3: ì˜¤ëŠ˜ì˜ ì‹ë‹¨ íˆìŠ¤í† ë¦¬

```
ğŸ“… ì˜¤ëŠ˜ì˜ ì‹ë‹¨ (2024-11-19)

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ì´ ì„­ì·¨ëŸ‰:
ì¹¼ë¡œë¦¬: 1,250 kcal
íƒ„ìˆ˜í™”ë¬¼: 185g
ì´ë‹¹ë¥˜: 28g
ë‹¨ë°±ì§ˆ: 65g
ì§€ë°©: 32g
ë‚˜íŠ¸ë¥¨: 3,200mg âš ï¸

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ğŸ½ï¸ ì„­ì·¨ ë‚´ì—­

08:30  ì•„ì¹¨
  ğŸš ê¹€ë°¥ (350 kcal) âœ…

12:45  ì ì‹¬
  ğŸ² ê¹€ì¹˜ì°Œê°œ (150 kcal) âš ï¸
  ğŸš ì¡ê³¡ë°¥ (300 kcal) âœ…

19:20  ì €ë…
  ğŸ¥© ë¶ˆê³ ê¸° (450 kcal) âš ï¸

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

âš ï¸ ì˜¤ëŠ˜ì˜ ê±´ê°• ì•Œë¦¼

â€¢ ë‚˜íŠ¸ë¥¨ì„ ë„ˆë¬´ ë§ì´ ì„­ì·¨í–ˆì–´ìš”!
  (ê¸°ì¤€: 1500mg, ì„­ì·¨: 3200mg)
â€¢ ì €ë… ì‹ì‚¬ í›„ ê°€ë²¼ìš´ ì‚°ì±…ì„ ì¶”ì²œí•´ìš”

[ìì„¸íˆ ë³´ê¸°] [í†µê³„ ë³´ê¸°]
```

---

## ğŸ“¦ í•„ìš”í•œ Flutter íŒ¨í‚¤ì§€

```yaml
dependencies:
  flutter:
    sdk: flutter
  
  # Firebase
  firebase_core: ^2.24.0
  cloud_firestore: ^4.13.0
  firebase_auth: ^4.15.0
  
  # ML ëª¨ë¸
  pytorch_mobile: ^0.2.2
  
  # ì´ë¯¸ì§€ ì²˜ë¦¬
  image_picker: ^1.0.5
  image: ^4.1.3
  
  # UI
  intl: ^0.18.1
  fl_chart: ^0.65.0  # í†µê³„ ì°¨íŠ¸
```

---

## ğŸš€ ê°œë°œ ì‹œì‘í•˜ê¸°

### 1. í”„ë¡œì íŠ¸ í´ë¡ 
```bash
git clone [repository_url]
cd diabetes-food-app
```

### 2. Flutter íŒ¨í‚¤ì§€ ì„¤ì¹˜
```bash
flutter pub get
```

### 3. Firebase ì„¤ì • íŒŒì¼ ì¶”ê°€
- `google-services.json` (Android)
- `GoogleService-Info.plist` (iOS)

### 4. ëª¨ë¸ íŒŒì¼ ì¶”ê°€
- `assets/model_mobile.ptl` ì¶”ê°€
- `pubspec.yaml`ì— ë“±ë¡

### 5. ì‹¤í–‰
```bash
flutter run
```

---

## ğŸ“ ì£¼ìš” ì½”ë“œ íë¦„

```dart
// 1. ì´ë¯¸ì§€ ì„ íƒ
final picker = ImagePicker();
final image = await picker.pickImage(source: ImageSource.camera);

// 2. ìŒì‹ ë¶„ë¥˜
FoodClassifier classifier = FoodClassifier();
var result = await classifier.classifyFood(image.path);
String foodName = result['ìŒì‹ëª…'];

// 3. ì˜ì–‘ì†Œ ì¡°íšŒ
var nutrition = await getNutritionData(foodName);

// 4. ìœ„í—˜ë„ í‰ê°€
int userLevel = 3;  // ì‚¬ìš©ìì˜ ë‹¹ë‡¨ ë ˆë²¨
bool isDangerous = DiabetesRiskChecker.isDangerous(userLevel, nutrition);
var warnings = DiabetesRiskChecker.getWarnings(userLevel, nutrition);

// 5. íˆìŠ¤í† ë¦¬ ì €ì¥
await saveMealHistory(userId, foodName, nutrition, isDangerous);

// 6. ê²°ê³¼ í™”ë©´ í‘œì‹œ
showResultScreen(foodName, nutrition, isDangerous, warnings);
```
